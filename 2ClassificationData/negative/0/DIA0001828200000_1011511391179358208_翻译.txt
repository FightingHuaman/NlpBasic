　　使用融合地理信息的隐语义模型对司机-网格的访问矩阵进行分解后，便可以获得司机对地点j的偏好，即矩阵P的第i行与矩阵Q的第j列的内积。然而，出租车载客区域推荐不同于传统的推荐系统，比如电影推荐、商品推荐等。载客点推荐属于基于位置的服务，必然与司机当前的位置有着重要的关系。比如，一个司机在上海的浦东区，若推荐一个位于宝山区的载客点显然是不太合理的。尽管该司机过去一段时间内在宝山区的载客点较为密集，但是因为现在的地理位置发生了变化，所以推荐如果只考虑司机历史偏好就显得太不充分了。这时就需要加入司机当前的位置信息，用于优化模型的推荐结果。
　　本文统计了数据集中所有出租车司机在寻找乘客过程中所行驶的路程，即寻客距离。图 5是我们从轨迹数据集中随机抽取一些出租车的寻客距离，并等比例缩放到（0,1）范围，在对寻客距离做核密度估计生成概率密度曲线后[17] 见下方(如图中实线所示)，从图中不难发现司机的寻客距离与概率密度之间的曲线关系同的正态分布（如图中星号散点图所示）较为相似。于是，我们考虑使用正态分布来刻画空间上出租车在网格间移动的便捷性，即网格可达度。据定义六，我们可以获得网格间的可达度矩阵，该矩阵的行、列均表示的是网格集合。通过结合可达度矩阵、司机-网格访问矩阵与司机当前位置，我们最终可以获得为司机推荐的网格列表结果。整个工作的流程如过程1所示。
　　过程1. 网格推荐过程.
     1). 使用100m边长网格划分研究区域，得到网格集合GridSet，并根据网格间距离，构造网格可达度矩阵A。
     2). 结合GridSet与出租车轨迹日志log构造司机-网格访问矩阵C。
     3). 结合POI数据、出租车数据、GridSet得到网格-属性矩阵X。.
     4). 将X融入到C的分解过程中，得到分解后的子矩阵P，Q。
     5). 结合网格可达度矩阵A，与第4步的结果，根据司机的标识u，以及其当前所处网格的编号i，从A与PQ获得相应的记录，求哈达玛积。
     6). 选择中数值较大的元素对应的网格编号推荐给司机。
　　因此，在确定了司机编号与其当前所处的位置后，便可以根据过程1为司机推荐载客区域。
1  实验与评估
5.1数据集说明与处理
5.1.1轨迹数据描述与处理
　　我们实验所采用的数据集是上海市2007年2月20日的4316辆出租车共91114条轨迹数据。出租车在行驶过程中，车上装有的GPS记录仪器将当前的位置等相关信息传送到服务器上，并保存下来。这些记录主要格式如表格 1  出租车轨迹格式所示。该数据集主要覆盖整个上海市主城区范围，由于数据集中存在着一些数据异常，我们相应的进行了一些预处理操作，包括地图偏移处理[19]、轨迹平滑[2]、异常状态修正和去除重复轨迹点。最终选择了([121.310,31.097]-[121.606,31.338])--上海市中心区域作为研究范围。我们使用边长为100米的等大小的正方形网格划分该研究区域，共得到了71336个网格。实验中，我们根据轨迹数据集的时间属性，划分数据得到三个数据集：6时前的数据作为训练集，6-8时的作为测试集；12时前的数据作为训练集，12-14时的数据作为测试集；21时以前的数据作为训练集，21-23时的数据作为测试集。该数据集的下载地址为http://www.cse.ust.hk/scrg/。
5.1.2 POI数据描述与处理
　　POI数据作为本文所使用的地理信息的一部分，用于构建网格-属性矩阵的内容。本文的POI数据从高德地图上爬取，共641127个POI数据点。每个POI点数据包含经纬度信息，以及相应的类型信息。该数据集包含12种类型POI数据，包括：餐饮、风景名胜、公共设施、交通设施、科教文化、金融保险、汽车服务、商务住宅、生活服务、体育休闲、医疗保险、住宿服务。该数据集覆盖上海主城区范围。([121.310,31.097]-[121.606,31.338])同样是本文选取POI实验数据的范围。该范围内的POI数量分布如图 6所示，排在前三的是餐饮、交通设施、商务住宅，分别代表着人们的食、行、住。
5.2 网格属性对推荐的影响
　　为了说明我们选取网格属性的合理性，我们随机抽样30位出租车司机与250个网格区域，从数据集中获取相应的日志信息后，构造本文定义网格属性信息和相关的司机偏好信息[1]。网格属性包括网格历史载客点数量、网格POI数量、网格类型、网格几何中心地理位置、网格历史载客距离。由于篇幅有限，我们选取其中三种属性分别进行阐述。
　　图 7描述了不同司机对于不同载客距离的偏好。图中横坐标是司机的标识ID，纵坐标是司机当天所有载客行程长度的平均值。从图中不难看出，有些司机偏好于较长的行驶路程如5、12、23号司机，而有些司机偏好于较短的行驶路程如4、11号司机。因为当搭载路程较远的乘客时，出租车的单位时间的空载率会较低一点，但是长途需求毕竟在少数，所以出租车司机能找到这种乘客的几率较小。当选择搭载路程较短的乘客时，虽然单位时间的空载率会高于前者，但是找到这种客源的几率较高。因此，若司机对载客距离的偏好不同，那么其选择载客的地点也会有所区别。比如机场附近的出租车一般都是以长途乘客为主，而在城区集市附近的出租车以短途为主[21]。
　　图8描述了250个网格内POI数量与载客点数量之间的关系。从图中不难看出，POI数量与载客点的数量正相关。即当网格内的POI数量越多时，客流量越大，这个网格内的载客需求也一般会较大。这里的相关系数的值不算太强，因为影响区域载客点数量的因素有很多。据此POI数量算是其中一种因素，该属性可以作为网格历史载客数量属性的补充。图 9是30位出租车司机对5种网格类型的偏好分布图。横坐标表示30位司机的ID，纵坐标表示对不同类型的偏好大小。每种类型偏好取值是根据司机访问过的网格中，相应的类型概率求和取平均的结果。从图中可以看到，不同司机对于不同类型的载客区域的偏好都不相同，且有着较大差异，编号2、7、8的司机甚至对这5种类别的载客区域偏好较低。对于商务住宅类别的载客区域，编号27、29的司机相比于20、21的司机有更大的偏好。这些偏好信息体现在对司机-网格访问矩阵分解后，即若网格属性分布与司机的偏好分布越接近，即两者内积越大，那么司机对该网格访问可能性也就越大。
5.3对比实验
　　推荐系统的主要目的是预测用户将来的喜好或者兴趣，很多方法从不同角度来度量推荐系统的性能。本文的评价指标参考自推荐系统[22]中常见的平均绝对误差（MAE）与均方误差（RMSE），这两个指标描述的是推荐载客结果与司机实际载客情况的差异大小，误差越小，准确度就越高。二者定义如（6）所示。
这里表示司机对网格的真实访问情况，如果访问了则，反之，。表示相应的司机对网格访问的概率大小。通过此二者间的差值表示推荐的误差大小，误差越小，表示推荐的结果准确度越高；反之，则准确度越低。表示测试集样本个数。从上面的定义不难看出，越低的MAE与RMSE的值意味着越好的推荐效果。
5.3.1对比算法 
    为了更好地体现我们实验的有效性，本实验采用推荐系统中常见的算法包括协同过滤，和相关的矩阵分解方法。
　　基于用户的协同过滤 (UCF)
　　在基于用户的协同过滤中(User-based Collaborative Filtering)，两个司机的相似度与他们共同访问过的网格情况有关，它可以直接根据用户-网格访问矩阵进行计算。首先通过相关的相似度计算方法计算不同司机的相似度，本文中使用皮尔逊相似度方法。然后用户u对网格g的访问概率，是通过寻找与用户u相似的其他用户对g的访问概率，并根据用户间的相似关系加权求得u对g的兴趣度。
　　隐语义模型 (LFM)
　　隐语义模型（Latent Factor Model），作为本文的基方法，旨在参照地显示出融合地理信息隐语义模型的效果提升程度。使用LFM直接分解用户网格访问矩阵，生成P和Q两个子矩阵后，将二者相应项的内积作为用户对网格访问概率。
　　非负矩阵分解（NMF）
　　非负矩阵分解(Nonnegative Matrix Factor)，简称NMF，是由Lee和Seung于1999年在《自然》杂志上提出的一种矩阵分解方法[23]。它是以最小化原始矩阵C与分解后的矩阵P，Q乘积的误差为目标，即，且满足条件， 通过式（7）进行更新。
　　它使分解后的矩阵所有元素均为非负值，使用NMF直接分解用户-网格访问矩阵，生成P、Q两个矩阵后，将二者相应项的内积作为用户对网格访问概率。
5.3.2实验效果评价及参数影响
	本小节首先对比分析 4 种推荐方法的效果,接着进一步分析本文所提方法中涉及到的参数对推荐结果的影响。
	图 10分别展示在隐含因子数K=20情况下，6-8时、12-14时与21-23时，早中晚三个时段下，四种不同方法在测试集上，MAE和RMSE的取值情况。从图 10(a)、(b)中可以看到，本文的方法无论在均方误差还是平均绝对误差下的效果都是最好的。具体的，我们可以看到，相比与LFM、NMF、CF，融合了地理信息的隐语义模型GeoLFM在21-23时段内的推荐结果的MAE分别降低了6.77%、34.46%、49.89%。同时该时段下的RMSE分别下降了4.63%、28.89%、39.75%。同样的，在12-14时段下的推荐结果也能体现我们方法的优越性。6-8时段的误差较大的原因是早上的出租车载客数据太过稀少，这个时候如果仅仅依靠地理信息，这相当于加大了客观因素的比重，事实上，出租车载客推荐应该是结合司机偏好与客观地理信息的过程，如果单单只考虑一方面的因素，只会加大推荐的误差。从全局看来，GeoLFM能够在一定程度上缓解出租车推荐系统中的数据稀疏性，充分说明融合地理信息的可行性与必要性。
　　本文提出的融合地理信息的隐语义模型中，潜在因素的数量对于推荐的结果有一定的影响，为了测试该参数的灵敏度，本文设置了潜在因素的数量K从0到600，查看随着该数量的变化，评价指标的变化情况。另外，我们在零均值高斯分布的假设下，查看了在不同标准差下，评价指标的变化情况。上述两组参数的实验结果如图 11所示。从图 11（a）中不难看出，随着隐含因子数量的增加，两个评价指标MAE与RMSE的值分布逐渐收敛在了0.4与0.5附近，变化率最大的隐含因子数K均在20左右。由图 11（b）可以看出，当标准差小于0.01时，两个评价指标的值都较高，当标准差值大于0.01后，两个评价指标的都较低，且变化较为缓慢。因为标准差越小越稳定，所以在较小的标准差下，网格可达度随着网格之间距离变化不太明显的，这意味着弱化了寻客距离的影响程度，由此造成了较大的误差。反之，当标准差较大时，系统充分考虑了寻客距离的影响，则可以提高系统推荐结果的准确性。
2  总结
　　本文对出租车载客区域推荐提出了融合地理信息隐语义模型，并使用高斯分布描述空间上下文信息，为司机提供精准的出租车载客区域推荐。实验中使用上海的数据集对本文方法进行验证后，本文方法在平均绝对误差（MAE）与均方误差（RMSE）两个评价指标上均有最优效果。相比于传统推荐算法如协同过滤，本文的方法缓解了数据稀疏性的问题。在与LFM、NMF比较中，说明了融合地理信息确实能在一定程度提升推荐效果，减少推荐的误差。另外在该模型中，网格的属性根据不同的场景调整后，不影响模型其他部分的运行，体现了模型具有较强的可扩展性。
　　下一步工作中，我们将考虑使用路网划分区域，以更加符合出租车运行中的实际情况。因为网格划分区域存在一定的随机性，可能存在将原本聚集的载客区域划分开来。如果能够使用基于路网的划分方式，区域每个子块由道路自然分割而成，那么将可能进一步提高推荐的准确率并减少误差率。
致 　 谢 　 在此，对本文工作给予帮助与建议的老师和同学以及提出宝贵评审意见的审稿专家表示衷心的感谢 ！

